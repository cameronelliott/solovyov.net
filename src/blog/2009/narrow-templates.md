title: Узкие шаблоны
date: 2009-03-05 22:13:53
tags: django, byteflow
----


Я давненько (полтора месяца прошло) уже ничего не писал - как обычно январь и февраль у меня какие-то странно безумные месяцы. Непонятно, почему в этом году так - сессии-то уже нету, может по привычке? ;) Но писать есть о чем, в основном длинные вдумчивые посты. А тут я буквально пять минут назад раскрыл себе глаза порядочно и хочу поделиться.

Есть такая проблема, что байтфлоу - не очень быстр. На самом деле ускорить можно кешированием, но я решил подождать с ним и сначала решить проблему реальную (где-то ж затык должен быть). Интересно, что отключение полное запросов в БД не сильно большое влияние оказывает - ускоряется все ну процентов на 10. И я крепко подозревал, что виноваты темплейты.

Ну подозревал себе и подозревал, а посмотреть все никак не давала лень. Но меня подтолкнули, и я открыл для себя истину. Одиночный пост, обычный вывод темплейтами:

    Requests per second:    13.43 [#/sec] (mean)

Тот же пост, просто вывод в плейн текст (`repr`, грубо говоря):

    Requests per second:    68.42 [#/sec] (mean)

О как. Либо переходить на Jinja, либо кешировать готовые темплейты насмерть...
