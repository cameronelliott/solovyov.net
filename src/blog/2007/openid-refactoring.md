title: OpenID refactoring
date: 2007-12-22 14:22:10
tags: blog, news, openid
----


Хорошие новости - я порядочно переделал механизм работы с опенидом в
блоге. Правда, сами внутренности `openidconsumer` почти не подверглись
издевательствам, изменения прошли в основном в коде работы с пользователем. Но
зато для пользователей поменялось всё порядочно.

Во-первых, теперь после попытки логина с неизвестным блогу OpenID'ом теперь не
покажет две непонятные формы "введите логин/пароль", а молча залогинит - создав
по пути нового пользователя. Правда, может выкинуть на старую страничку - если
вдруг система `sreg` отдаст email, уже существующий в базе (если она не отдаст
email, то всё пойдёт по первому сценарию без привлечения пользователя к
процессу).

Во-вторых, теперь в профиле есть ссылочка на список ассоциированных с
пользователем OpenID'ов, где их можно удалять и добавлять новые.

Так что жизнь становится легче и удобнее с каждым часом. :D Велкам! ;-)
